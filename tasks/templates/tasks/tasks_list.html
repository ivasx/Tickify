{% extends 'base.html' %}
{% block content %}

<div class="content">
    <h1 class="section-title">Завдання</h1>

    <!-- Фільтр за категоріями -->
    <div class="category-filter">
        <label for="category-select">Фільтрувати за категорією:</label>
        <select id="category-select" name="category" onchange="location = this.value;">
            <option value="{% url 'tasks_list' %}"
                    {% if not current_category %}selected{% endif %}>
                Всі категорії
            </option>
            {% for category in categories %}
                <option value="{% url 'category' category.slug %}"
                        {% if current_category and category.slug == current_category.slug %}selected{% endif %}>
                    {{ category.name }}
                </option>
            {% endfor %}
        </select>
    </div>

    <!-- Активні завдання -->
    <h2 class="section-subtitle">Активні завдання</h2>
    <div class="tasks-grid">
        {% for task in tasks %}
            {% if not task.completed %}
                {% include "tasks/task_card.html" with task=task %}
            {% endif %}
        {% empty %}
            <div class="empty-state">
                <h3>Поки що немає активних завдань</h3>
                <p>Створіть своє перше завдання!</p>
            </div>
        {% endfor %}
    </div>

    <!-- Завершені завдання -->
    <h2 class="section-subtitle">Завершені завдання</h2>
    <div class="tasks-grid">
        {% for task in tasks %}
            {% if task.completed %}
                {% include "tasks/task_card.html" with task=task %}
            {% endif %}
        {% empty %}
            <div class="empty-state">
                <h3>Поки що немає завершених завдань</h3>
                <p>Завершіть своє перше завдання, і воно з'явиться тут</p>
            </div>
        {% endfor %}
    </div>

    <!-- Пагінація -->
    {% if is_paginated %}
        <div class="pagination">
            {% if tasks.has_previous %}
                <a href="?page={{ tasks.previous_page_number }}">Попередня</a>
            {% endif %}

            <span>Сторінка {{ tasks.number }} з {{ tasks.paginator.num_pages }}</span>

            {% if tasks.has_next %}
                <a href="?page={{ tasks.next_page_number }}">Наступна</a>
            {% endif %}
        </div>
    {% endif %}

</div>

{% endblock %}
